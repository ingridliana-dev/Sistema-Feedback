<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback de Aula Experimental Sem Agendamento</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Voltar</a>
        <h1>Feedback de Aula Experimental Sem Agendamento</h1>

        <div class="form-group">
            <label for="data">Data:</label>
            <input type="date" 
                   id="data" 
                   lang="pt-BR"
                   pattern="\d{2}/\d{2}/\d{4}">
        </div>

        <div class="form-group">
            <label for="diaSemana">Dia da Semana:</label>
            <input type="text" id="diaSemana" readonly>
        </div>

        <div class="form-group">
            <label for="horario">Hor√°rio:</label>
            <input type="time" id="horario">
        </div>

        <button onclick="gerarFeedback()">Gerar Feedback</button>

        <div id="resultado"></div>
        <button id="copyButton" class="copy-button" style="display: none;" onclick="copiarTexto()">Copiar Texto</button>
    </div>
    <button class="theme-switch" id="themeSwitch">üåì</button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Pegar a data local sem ajustes de UTC
            const hoje = new Date();
            
            // Formatar a data diretamente
            const ano = hoje.getFullYear();
            const mes = String(hoje.getMonth() + 1).padStart(2, '0');
            const dia = String(hoje.getDate()).padStart(2, '0');
            const dataFormatada = `${ano}-${mes}-${dia}`;
            
            document.getElementById('data').value = dataFormatada;

            // Configurar hor√°rio atual
            const timeString = hoje.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });
            document.getElementById('horario').value = timeString;

            // Atualizar dia da semana inicial
            atualizarDiaSemana();

            // Adicionar evento para atualizar dia da semana quando a data mudar
            document.getElementById('data').addEventListener('change', atualizarDiaSemana);
        });

        function atualizarDiaSemana() {
            const dataInput = document.getElementById('data').value;
            const data = new Date(dataInput);
            const diasSemana = ['Segunda-feira', 'Ter√ßa-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'S√°bado', 'Domingo'];
            const diaSemana = diasSemana[data.getDay()];
            document.getElementById('diaSemana').value = diaSemana;
        }

        function formatarData(data) {
            const [ano, mes, dia] = data.split('-');
            const meses = [
                'jan.', 'fev.', 'mar.', 'abr.', 'maio', 'jun.',
                'jul.', 'ago.', 'set.', 'out.', 'nov.', 'dez.'
            ];
            return `${dia} de ${meses[parseInt(mes) - 1]} de ${ano}`;
        }

        function gerarFeedback() {
            const data = formatarData(document.getElementById('data').value);
            const diaSemana = document.getElementById('diaSemana').value;
            const horario = document.getElementById('horario').value;

            const feedback = `------------------------
üìÜ Data: ${data}
üìÖ Dia da Semana: ${diaSemana}
üïí Hor√°rio: ${horario}

** Sem agendamentos e nenhum aluno entrou. **
------------------------`;

            const resultado = document.getElementById('resultado');
            resultado.textContent = feedback;
            resultado.style.display = 'block';
            document.getElementById('copyButton').style.display = 'block';
        }

        function copiarTexto() {
            const texto = document.getElementById('resultado').textContent;
            navigator.clipboard.writeText(texto).then(() => {
                alert('Texto copiado com sucesso!');
            });
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        }

        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // Inicializar tema
        const savedTheme = localStorage.getItem('theme') || 'light';
        setTheme(savedTheme);

        // Adicionar evento ao bot√£o
        document.getElementById('themeSwitch').addEventListener('click', toggleTheme);
    </script>
</body>
</html>